
public class Client {
	private String nom;
	private Serveur serveurActif;
	
	public Client(String nomClient) {
		this.nom = nomClient;
		this.serveurActif = null;
	}
	
	public void envoyer(Message message) {
		this.serveurActif.stocker(message);
	}
	
	public void envoyer(String contenu, String destinataire) throws ServeurException {
		if (serveurActif == null)
			throw new ServeurException();
		
		Message message = new Message(this.nom, destinataire, contenu);
		this.serveurActif.stocker(message);
		
	}
	
	public void connexion(Serveur serveur) {
		if (this.serveurActif == null) {
			this.serveurActif = serveur;
		} else {
			System.out.println("Vous etes deja connecté à un serveur veuillez vous déconnecter avant.");
		}
	}
	
	

	public void deconnexion() {
		this.serveurActif = null;
	}
	
	public void consulter() throws ServeurException {
		if (serveurActif == null)
			throw new ServeurException();
		
		System.out.println("Messages pour "+this.nom+" : "this.serveurActif.messagesRecusPour(this.nom));
		
			
		
	}
	
	public String toString() {
		return "Client [nom=" + nom + ", serveurActif=" + serveurActif + "]";
	}
}
